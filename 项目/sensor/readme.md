- **Q: 图片上报和 Ajax 上报的区别？**  
  A: 图片上报的优点是兼容性好、实现简单、跨域天然支持，但缺点是只能 GET，参数受 URL 长度限制，无法获取响应结果。Ajax/Fetch 上报支持 POST，可以传输更大、更复杂的数据结构，还能处理响应和错误回调，但需要服务端设置 CORS，且在页面卸载时可能丢失请求。现代浏览器推荐用 `fetch({keepalive:true})` 或 `sendBeacon`，并在老环境降级为图片上报。实际工作中，我会优先用 `sendBeacon`，因为它在页面关闭、跳转时也能保证数据可靠送达，只有在不支持的浏览器下才回退到图片方案。

- **Q: 埋点上报对性能有没有影响？**  
  A: 会有一定影响，比如频繁的请求会占用带宽和线程。优化手段包括：事件合并（批量上报）、延迟上报（非关键路径延迟执行）、数据压缩（JSON 压缩或 protobuf）、异步非阻塞（避免阻塞渲染）。在 SDK 设计时，我会将高频埋点（如滚动、曝光）采样处理，只保留部分数据，保证性能和数据价值的平衡。例如曝光埋点设置 10% 采样，点击埋点全量，性能埋点延迟上报，确保用户体验不受影响。
