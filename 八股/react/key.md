# React 中 key 的作用

在 React 中，`key` 的核心作用是 **帮助 React 在调和（diff）过程中识别哪些元素被修改、复用或销毁**。

- 当渲染列表时，React 会通过 `key` 来判断某个元素是否可以复用。
- 如果列表没有唯一的 `key`，React 会默认使用元素的索引作为 `key`，这可能导致组件状态错乱，尤其是在元素顺序发生变化时。
- 正确使用 `key`（通常是稳定且唯一的 id）可以提升渲染性能，并保证组件的状态稳定和正确。

✅ 正确用法：为列表项提供稳定且唯一的 `key`（通常是 id）。  
⚠️ 注意：`key` 只是 React 内部用来识别元素的标识，不会作为 props 传递给子组件。

## key 与 diff 算法

传统的树形 diff 算法时间复杂度是 O(n³)，React 通过引入 key 和一系列假设，把复杂度降低到 O(n)。

- React 在同一层级比较新旧节点时，会用 key 来快速定位对应关系。
- key 相同 → 复用旧节点，只更新必要的属性。
- key 不同 → 卸载旧节点，创建新节点。

举例：

```jsx
['A','B','C'] → ['B','A','C']
```

如果没有 key 或用索引作为 key，React 可能会错误复用，导致组件状态错乱。使用唯一 key 能确保 diff 更高效和正确。
