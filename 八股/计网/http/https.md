# HTTP 与 HTTPS 的区别

## 1. 主要区别

### 1.1 安全性(明文传输，加密传输)

### 1.2 默认端口不同

### 1.3 连接方式多了 tls,ssl 链接

### 1.4 证书认证

## 2. HTTPS 的安全机制

### 2.1 混合加密

- **对称加密**：用于加密传输数据
  - 优点：加解密速度快
  - 缺点：密钥的传输和管理困难
- **非对称加密**：用于传输对称加密的密钥
  - 优点：安全性高
  - 缺点：加解密速度慢
- **混合使用**：结合两种加密方式的优点
  - 用非对称加密传输对称加密的密钥
  - 用对称加密进行后续数据传输

### 2.2 摘要算法与数字签名

- **摘要算法**：
  - 对传输的数据生成固定长度的摘要
  - 确保数据完整性，防止篡改
  - 常用算法：MD5、SHA-1、SHA-256
- **数字签名**：
  - 服务器用私钥对摘要进行加密
  - 客户端用公钥验证签名
  - 确保消息来源的真实性

### 2.3 数字证书

- **作用**：
  - 身份认证：确保服务器身份的真实性
  - 公钥传输：安全地将服务器公钥传给客户端
- **证书内容**：
  - 服务器信息
  - 服务器公钥
  - 证书有效期
  - CA 签名
- **验证流程**：
  - 客户端收到证书后，验证 CA 签名
  - 使用内置的 CA 公钥解密签名
  - 比对证书信息确保真实性

## 3. HTTPS 连接过程（握手流程）

1. **TCP 连接**：客户端与服务器先进行三次握手，建立可靠连接。
2. **Client Hello**：客户端发起请求，携带支持的 TLS 版本、加密套件列表、随机数。
3. **Server Hello**：服务器选择加密算法，返回随机数，并发送服务器数字证书。
4. **证书验证**：客户端校验证书是否可信（CA 签发、域名一致、未过期）。
5. **密钥交换**：
   - 客户端生成 Pre-Master Key，用服务器公钥加密后发送给服务器。
   - 双方通过随机数和 Pre-Master Key 生成对称密钥（Session Key）。
6. **完成握手**：
   - 双方使用协商好的对称密钥进行加密通信。
   - 后续数据传输都基于对称加密，保证机密性和效率。

## 4. HTTPS 一定安全可靠吗

HTTPS 并不是绝对安全可靠的，主要取决于以下几个方面：

- **证书信任链**：如果用户或操作系统信任了不安全或伪造的 CA 证书（比如被恶意软件植入的“垃圾”证书），那么即使网站使用了 HTTPS，依然可能被中间人攻击。
- **证书本身问题**：如果网站使用了自签名证书、过期证书或被吊销的证书，安全性也无法保证。
- **加密算法强度**：如果使用了弱加密算法（如已被破解的 RC4、MD5），也会存在被破解的风险。
- **浏览器警告忽略**：用户如果忽略浏览器的安全警告，强行访问有问题的 HTTPS 网站，也会失去安全保障。
